var A=[[0,1,1,1,0],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1]],B=[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0]],C=[[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,1]],D=[[1,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,0]],E=[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1]],F=[[1,1,1,1,1],[1,0,0,0,0],[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0]],G=[[1,1,1,1,1],[1,0,0,0,0],[1,0,0,1,1],[1,0,0,0,1],[1,1,1,1,1]],H=[[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1]],I=[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1]],J=[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[1,0,1,0,0],[1,1,1,0,0]],K=[[1,0,0,1,0],[1,0,1,0,0],[1,1,0,0,0],[1,0,1,0,0],[1,0,0,1,0]],L=[[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,0,0,0,0],[1,1,1,1,1]],M=[[1,0,0,0,1],[1,1,0,1,1],[1,0,1,0,1],[1,0,0,0,1],[1,0,0,0,1]],N=[[1,0,0,0,1],[1,1,0,0,1],[1,0,1,0,1],[1,0,0,1,1],[1,0,0,0,1]],O=[[0,1,1,1,0],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],P=[[1,1,1,1,0],[1,0,0,0,1],[1,1,1,1,0],[1,0,0,0,0],[1,0,0,0,0]],Q=[[0,1,1,1,0],[1,0,0,0,1],[1,0,1,0,1],[1,0,0,1,1],[0,1,1,1,0]],R=[[1,1,1,1,1],[1,0,0,0,1],[1,0,1,1,0],[1,0,0,1,0],[1,0,0,0,1]],S=[[0,1,1,1,1],[1,0,0,0,0],[0,1,1,1,0],[0,0,0,0,1],[1,1,1,1,0]],T=[[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],U=[[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[0,1,1,1,0]],V=[[1,0,0,0,1],[1,0,0,0,1],[0,1,0,1,0],[0,1,0,1,0],[0,0,1,0,0]],W=[[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[0,1,1,1,0]],X=[[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,1,0,1,0],[1,0,0,0,1]],Y=[[1,0,0,0,1],[0,1,0,1,0],[0,0,1,0,0],[0,0,1,0,0],[0,0,1,0,0]],Z=[[1,1,1,1,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,1,1,1,1]],ms={A:A,B:B,C:C,D:D,E:E,F:F,G:G,H:H,I:I,J:J,K:K,L:L,M:M,N:N,O:O,P:P,Q:Q,R:R,S:S,T:T,U:U,V:V,W:W,X:X,Y:Y,Z:Z},blobCount={};!function(t){function e(t){if(t=t.toUpperCase(),"undefined"!=typeof blobCount[t])return blobCount[t];var e=0;for(i=0;i<ms[t].length;i++)for(j=0;j<ms[t][i].length;j++)1==ms[t][i][j]&&e++;return blobCount[t]=e,e}function s(t,e){var s=[];for(i=1;i<6;i++)for(s[i-1]=[],j=1;j<6;j++)s[i-1][j-1]=t.matrix[i][j];for(i=0;i<5;i++)for(j=0;j<5;j++)if(e[i][j]){var h=!1;for(x=0;x<5;x++){for(y=0;y<5;y++)if(s[x][y]){switch(t.animation){case"spiral":t.SpiralTo(x+1+"_"+(y+1),i+1,j+1);break;case"contract":t.MoveTo(x+1+"_"+(y+1),3,3);break;case"fade":t.FadeTo(x+1+"_"+(y+1),i+1,j+1);break;default:t.MoveTo(x+1+"_"+(y+1),i+1,j+1)}s[x][y]=!1,h=!0;break}if(h)break}}"contract"==t.animation&&setTimeout(function(){var i=0,s=0;for(i=0;5>i;i++)for(s=0;5>s;s++)e[i][s]&&t.MoveTo("3_3",i+1,s+1)},1e3)}function h(t,i,e,s,o,a){if("undefined"!=typeof a&&t.y<i.y&&(o=-1),1>e)return t.elem.css("top",i.y+"px"),void t.elem.css("left",i.x+"px");var n=e*e-(t.x-i.x)*(t.x-i.x);return n=Math.sqrt(n),isNaN(n)?(s*=-1,o*=-1,t.x=t.x+4*s,n=e*e-(t.x-i.x)*(t.x-i.x),n=Math.sqrt(n)):t.x=t.x+2*s,t.y=i.y+o*n,isNaN(t.y)?(t.elem.css("top",i.y+"px"),void t.elem.css("left",i.x+"px")):(t.elem.css("top",t.y+"px"),t.elem.css("left",t.x+"px"),void setTimeout(function(){h(t,i,e-1,s,o)},r))}var r=10,o={},a=function(t,s){for(this.InitVariables(),this.elem=t,this["char"]=s["char"],this.char_x=this["char"],this.hash=Math.floor(1e4*Math.random())%5e3;"undefined"!=typeof o[this.hash];)this.hash=Math.floor(1e4*Math.random())%5e3;this.elem.attr("hash",this.hash),"undefined"!=typeof s.height&&parseInt(s.height)>0&&(this.height=parseInt(s.height),this.blobHeight=parseInt(s.height)/5),"undefined"!=typeof s.width&&parseInt(s.width)>0&&(this.width=parseInt(s.width),this.blobWidth=parseInt(s.width)/5),"undefined"!=typeof s.background&&(this.background=s.background),"undefined"!=typeof s.border&&(this.border=s.border),"undefined"!=typeof s.animation&&(this.animation=s.animation);var h=this.elem.offset();for(this.startX=h.left,this.startY=h.top,this.elem.css("position","relative"),this.elem.css("height",this.height+"px"),this.elem.css("width",this.width+"px"),this.req=e(s["char"]),this.matrix=[],i=0;i<7;i++)for(this.matrix[i]=[],j=0;j<7;j++)0==i||0==j||6==i||6==j?this.matrix[i][j]=1:this.matrix[i][j]=0;if("none"!=this.animation){this.create=1,this.matrix[3][3]=1,this.createElement(3,3);var r=this;setTimeout(function(){r.Spread(3,3)},this.timeout)}else for(i=0;i<5;i++)for(j=0;j<5;j++)ms[this["char"]][i][j]&&(this.createElement(i,j),this.create++,this.matrix[i+1][j+1]=1)};a.prototype.GetPosition=function(t,i){return{x:i*this.blobWidth,y:t*this.blobHeight}},a.prototype.createElement=function(i,e){var s=this.GetPosition(i,e),h=document.createElement("div");return t(h).addClass("dwelem"),t(h).attr("pos",this.char_x+this.hash+"_"+i+"_"+e),this.matrix[i][e]++,t(h).css("display","inline-block"),t(h).css("position","absolute"),t(h).css("transition","top .2s, left .2s"),t(h).css("top",s.y+"px").css("left",s.x+"px"),t(h).css("width",this.blobWidth+"px").css("height",this.blobHeight+"px"),t(h).css("background-color",this.background),t(h).css("border",this.border),this.elem.append(h),h},a.prototype.deleteBlobs=function(e){var s=ms[this["char"]];for(i=0;i<ms[this["char"]].length;i++)for(j=0;j<ms[this["char"]][i].length;j++)if(1==ms[this["char"]][i][j]){var h=i+1+"_"+(j+1),r=t(".dwelem[pos='"+this.char_x+this.hash+"_"+h+"']").eq(0);if(r.remove(),s[i][j]=0,--e,0==e)return s}return s},a.prototype.createBlobs=function(t){var i,e,s=ms[this["char"]],h=[],r=t;for(i=0;i<ms[this["char"]].length;i++){for(e=0;e<ms[this["char"]][i].length&&(1!=ms[this["char"]][e][i]||(h.push({i:i,j:e}),--r,0!=r));e++);if(0==r)break}if(r)for(;r--;)h.push(h[h.length-1]);for(var i=0;i<ms[this["char"]].length;i++)for(var e=0;e<ms[this["char"]][i].length;e++)if(0==ms[this["char"]][i][e]){var o=h.pop();if(this.createElement(o.i+1,o.j+1),this.MoveTo(o.i+1+"_"+(o.j+1),i+1,e+1),s[i][e]=1,--t,0==t)return s}return s},a.prototype.transformTo=function(i){var s,h,r=e(this["char"]),o=e(i),a=ms[this["char"]];for(r>o?a=this.deleteBlobs(r-o):o>r&&(a=this.createBlobs(o-r)),s=1;6>s;s++)for(h=1;6>h;h++)this.matrix[s][h]=a[s-1][h-1];for(var n=[],s=0;s<ms[this["char"]].length;s++)n[s]=[0,0,0,0,0];this.elem.children(".dwelem").each(function(){var i=t(this).attr("pos").split("_");n[parseInt(i[1])-1][parseInt(i[2])-1]=1});var f=[];for(s=0;5>s;s++)for(h=0;5>h;h++)!ms[i][s][h]&&n[s][h]&&f.push({i:s,j:h});for(s=0;5>s;s++)for(h=0;5>h;h++)if(ms[i][s][h]&&!n[s][h]){var c=f.pop();this.MoveTo(c.i+1+"_"+(c.j+1),s+1,h+1)}this.char_x=i+this.char_x,this.elem.children(".dwelem").each(function(){var e=t(this).attr("pos");e=i+e.substr(0,e.length),t(this).attr("pos",e)})},a.prototype.MoveTo=function(i,e,s){var h=i.split("_");this.matrix[parseInt(h[0])][parseInt(h[1])]--,this.matrix[e][s]++;var r=t(".dwelem[pos='"+this.char_x+this.hash+"_"+i+"']").eq(0);r.attr("pos",this.char_x+this.hash+"_"+e+"_"+s);var o=this.GetPosition(e,s);r.css("top",o.y+"px"),setTimeout(function(){r.css("left",o.x+"px")},500)},a.prototype.FadeTo=function(i,e,s){var h=i.split("_");this.matrix[parseInt(h[0])][parseInt(h[1])]--,this.matrix[e][s]++;var r=t(".dwelem[pos='"+this.char_x+this.hash+"_"+i+"']").eq(0);r.fadeOut(),r.attr("pos",this.char_x+this.hash+"_"+e+"_"+s);var o=this.GetPosition(e,s);r.css("top",o.y+"px"),r.css("left",o.x+"px"),setTimeout(function(){r.fadeIn()},1e3)},a.prototype.SpiralTo=function(i,e,s){var r=t(".dwelem[pos='"+this.char_x+this.hash+"_"+i+"']").eq(0);r.attr("pos",this.char_x+this.hash+"_"+e+"_"+s),r.css("transition","none");var o=i.split("_");o=this.GetPosition(o[0],o[1]),o.elem=r;var a=this.GetPosition(e,s),n=Math.sqrt((o.x-a.x)*(o.x-a.x)+(o.y-a.y)*(o.y-a.y));h(o,a,n,-1,1,!0)},a.prototype.Spread=function(t,i){if(this.create==this.req)return void("undefined"==typeof this.alphabetised&&(this.alphabetised=!0,s(this,ms[this["char"]])));var e=null,h=null,r=!1;if(Math.random()>.5)for(x=t-1;x<=t+1;x++){for(y=i-1;y<=i+1;y++)if(!this.matrix[x][y]){if(null!=e){h={x:x,y:y},r=!0;break}e={x:x,y:y}}if(r)break}else for(x=t+1;x>=t-1;x--){for(y=i+1;y>=i-1;y--)if(!this.matrix[x][y]){if(null!=e){h={x:x,y:y},r=!0;break}e={x:x,y:y}}if(r)break}if(null!=e){if(this.createElement(t,i),this.MoveTo(t+"_"+i,e.x,e.y),this.matrix[e.x][e.y]=1,this.create++,this.create!=this.req){null!=h&&(this.MoveTo(t+"_"+i,h.x,h.y),this.matrix[t][i]=0,this.matrix[h.x][h.y]=1);var o=this;setTimeout(function(){o.Spread(e.x,e.y),null!=h?o.Spread(h.x,h.y):o.Spread(t,i)},this.timeout)}}},a.prototype.InitVariables=function(){this["char"]=null,this.char_x=null,this.elem=null,this.timeout=1e3,this.width=100,this.height=100,this.startX=0,this.startY=0,this.hash=null,this.blobWidth=20,this.blobHeight=20,this.req=0,this.create=0,this.background="rgba(0, 0, 0, 1)",this.border="1px dashed black",this.animation="motion"},t.fn.digitalwrite=function(i){return"string"!=typeof i["char"]?void console.log("[digitial-write plugin] Charecter not specified or invalid format"):void(0!=t(this).length&&t(this).each(function(){t(this).data("obj",new a(t(this),i))}))},t.fn.transformTo=function(i){return"undefined"==typeof i?void console.log("[digitial-write plugin] Charecter not specified or invalid format"):void(0!=t(this).length&&t(this).each(function(){var e=t(this).data("obj");"undefined"==typeof e&&t(this).digitalwrite({"char":i}),e.transformTo(i)}))}}(jQuery);